! function(n) {
    var o = {},
		tvssPause = false,
		tvssRun = false;
    Doc = n(document), Ajx = zetaAj.url, n(function() {
        o.SimpleClicks(), o.LicenseApiRest(), o.FeaturedTitles(), o.FeaturedSlider(), o.UploadBackdrop(), o.AdTabsManage(), o.SaveAdOptions(), o.LinkPost(), o.LinkDelete(), o.LinkEditor(), o.LinkReload(), o.LinkSave(), o.UpdateOptions(), o.UpdateDatabase(), o.DatabaseTool()
    }), 
    Doc.on("click", "#clear-tvssid", function() {
		url = n(this).data("href");
		if (!n(this).hasClass('processing') && confirm('Are You Sure?')){
			n(this).addClass('processing');
			n(this).text("Processing..");
			window.location.href = url;
		}
	}),
	
	Doc.on("click", "#update-tvssid", function() {
		
		n("#bulk-tvssid-update").remove();
		n("tr.hidden").remove();
        var t = n("tbody#the-list"),
            ids = n("input[name='post[]']:checked").map(function() {
                return n(this).val();
            }).get();
        opt = n("#update-tvssid-option option:selected").val();

        if (opt != 0 && ids != '') {
            n("#bulk-edit .inline-edit-save .cancel").trigger("click");
            t.prepend('<tr id="bulk-tvssid-update" style="display:none;"><td colspan="8"><div class="inline-edit-wrapper">' + '<fieldset class="inline-tvss-col-left"><legend class="inline-edit-legend" id="bulk-edit-legend">' + zetaAj.mtupdbulk + '</legend><div class="inline-tvss-col"><div id="bulk-title-div"><div id="bulk-titles"><ul id="bulk-tvss-list" role="list"></ul></div></div></div></fieldset><fieldset class="inline-tvss-col-right"><legend class="inline-edit-legend" id="bulk-edit-legend">' + zetaAj.mtupdcompl + '</legend><div class="inline-tvss-col"><div id="bulk-title-div"><div id="bulk-titles"><ul id="bulk-tvss-cmplt" role="list"></ul></div></div></div></fieldset><div class="submit inline-edit-save"><form id="tvssgenerator"><input type="hidden" id="tvsserror" value=""><input type="hidden" id="tvsspause" value="0"><input type="hidden" id="tvssids" name="ids" value="' + ids + '"><input type="hidden" id="tvsstype" name="type" value="' + opt + '"> <a id="pause_tvss" class="button button-primary">Pause</a> <a id="update_tvss" class="button button-primary">Update</a><button type="button" class="button cancel">Cancel</button></div></div>' + '</div></td></tr>');
            var i;
            for (i = 0; i < ids.length; ++i) {
                var tit = n('#inline_' + ids[i] + ' .post_title').text();
                n("#bulk-tvss-list").append('<li class="ntdelitem"><button type="button" id="-' + ids[i] + '" class="button-link ntdelbutton"><span class="screen-reader-text">Remove ' + tit + '</span></button><span class="ntdeltitle" aria-hidden="true">' + tit + '</span></li>')
            }
			n("#bulk-tvssid-update").fadeToggle(500);
            t.prepend('<tr class="hidden">');
        }		
    }),
	
	Doc.on("click", "#view-fail", function(){
		n(this).parent().addClass("show");
	}),
	Doc.on("click", "#pause_tvss", function() {
       tvssPause = true;
		if (!confirm('Pause the update process?')){
			return false;
		}
	   n(this).removeClass("active");
	   n(this).addClass("hide");
	   n("#update_tvss").removeClass("hide").addClass("active")
    }),


    Doc.on("click", "#update_tvss", function() {
		

		tvssRun = true;
		 tvssPause = false;
		if (!confirm('Proceed to update process?')){
			return false;
		}
		
		tvssRun = true;
		n(this).text("Resume").addClass("hide").removeClass("active");
		n("#pause_tvss").removeClass("hide").addClass("active");

        var type = n("#tvsstype").val();
        var ids = n("#tvssids").val().split(',');
        n("#the-list").addClass('updating');
        n(".check-column input[type=checkbox], #bulk-action-selector-bottom, #bulk-action-selector-top, .bulkactions input[type=submit]").prop("disabled", !this.checked);
        n("#bulk-tvssid-update .inline-tvss-col-left #bulk-title-div").addClass("inprogress");
        n("#bulk-tvssid-update .inline-tvss-col-left #bulk-title-div").prepend('<div class="ldng"><div class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>')

		var count = 0;
        n.each(ids, function(e, s) {
		
			setTimeout(function(){ if(!tvssPause) { o.TVSSUpdate(type, s); } }, count * 500);						  
			count++;
			
        });

    }), Doc.on("click", "#bulk-tvss-list .ntdelitem button", function() {

        var id = n(this).prop('id'),
            ids = n("input[name='post[]']:checked").map(function() {
                return n(this).val();
            }).get();
        count = n("#bulk-tvss-list").children().length;
        n("#tvssids").val(ids);
        n("#cb-select" + id).prop("checked", false);
        n(this).closest('li').remove();
        if (count <= 1) {
            n("#cb-select-all-1").prop("checked", false);
            n("#bulk-tvssid-update").remove();
            n("tr.hidden").remove();
        }
        var ids = n("input[name='post[]']:checked").map(function() {
            return n(this).val();
        }).get()
        n("#tvssids").val(ids);

    }), Doc.on("click", "#bulk-tvssid-update .button.cancel", function() {
		 tvssPause = true;
		 if(tvssRun){
			if (!confirm('Are you sure to stop the current process?')){
				return false;
			}
		}
		n(".check-column input[type=checkbox], #bulk-action-selector-bottom, #bulk-action-selector-top, .bulkactions input[type=submit]").prop("disabled", false);
		n("#tvssgenerator .cancel").text("Close").focus();		
		n("#cb-select-all-1").prop("checked", false);
        n("#bulk-tvssid-update").remove();
        n("tr.hidden").remove();

    }),
	 o.TVSSUpdate = function(e, s) {
		return type = e, cmplt = '',
      n.ajax({
            url: zetaAj.url,
            type: "POST",
            dataType: "json",
            data: {
                type: e,
                id: s,
                action: "omegadb_update_tvss"
            },
				
            success: function(e) {
				var tit = n("#post-" + e.id + " #inline_" + e.id + " .post_title").text(),
					ids = n("input[name='post[]']:checked").map(function(){return n(this).val();}).get();					
				cmplt = (type == 'tvid') ? (e.tvid) ? cmplt = true : false : (type == 'sside') ? (e.ssid) ? true : false : (e.tvid && e.ssid) ? true : false;					
				if(cmplt == false){
					errorTotal = n("#tvsserror").val() + 1;
					n("#tvsserror").val(errorTotal);
				}
				
				var errorCheck = n("#tvsserror").val();
				var remainCheck = n("#bulk-tvss-list").children().length;				
				var ico = (cmplt == true) ? '<span class="icon-cmplt"></span>' : '<span class="icon-fail"></span>',
					clss = (cmplt == true) ? null : 'class="fail-error"';
					txt = (cmplt == true) ? 'View' : 'Error';

					n("#bulk-tvss-cmplt").prepend('<li id="ep-' + e.id + '" class="ntdelitem">' + ico + ' <span class="ntdeltitle" aria-hidden="true">' + tit +'</span> <span class="vwall"><a ' + clss + '>' + txt + '</a><a href="' + zetaAj.adminurl + 'post.php?post=' + e.id + '&action=edit">Edit</a></span></li>');
					n("#bulk-tvss-list #-" + e.id).parent('li').remove();
					n("#cb-select-"+ e.id).prop("checked", false);

				n("#tvssids").val(ids);
				if(remainCheck <= 1) { tvssRun = false; n(".check-column input[type=checkbox], #bulk-action-selector-bottom, #bulk-action-selector-top, .bulkactions input[type=submit]").prop("disabled", false), n("#tvssgenerator .cancel").text("Close").focus(), n("#cb-select-all-1").prop("checked", false), n("#update_tvss, .inline-tvss-col .lds-default, #pause_tvss").remove(), n(".inline-tvss-col .ldng").html('<span class="cmplt-ico"></span> Process Completed.'); }
				
				console.log(e);
            }
        })
    }, o.SimpleClicks = function() {
        Doc.on("click", ".requestscontrol", function() {
            var o = n(this).data("post");
            n("#request_post_" + o).html(zetaAj.loading)
        }), Doc.on("click", "#zetalinks_response > tr", function() {
            n(this).toggleClass("active")
        }), Doc.on("click", "#zetaflix_anchor_showform", function() {
            return n(".dform").fadeIn(500), n(".dpre").hide(), !1
        }), Doc.on("click", "#zetaflix_anchor_hideform", function() {
            return n(".dpre").fadeIn(500), n(".dform").hide(), !1
        }), Doc.on("click", "#zetalinkeditor_cancel", function() {
            var o = n(this).data("id");
            return n(".managelinks").show(), n("#zetaeditorlink-" + o).remove(), !1
        }), Doc.on("click", ".zeta-nav-tab", function() {
            var o = n(this).attr("data-tab");
            return n(".zeta-nav-tab").removeClass("nav-tab-active"), n(".zt_boxg").removeClass("current"), n(this).addClass("nav-tab-active"), n("#" + o).addClass("current"), !1
        }), Doc.on("submit", "#post", function() {
            n("#zetaflix_lfield_urls").val() && 1 == confirm(zetaAj.confirmpublink) && n("#zetaflix_anchor_postlinks").trigger("click")
        })
    }, o.LicenseApiRest = function() {
        Doc.on("click", "#api_zetathemes", function() {
            n(".apivalue").html(zetaAj.loading);
            var o = zetaAj.zetathemes_server;
            return b = zetaAj.zetathemes_item, c = zetaAj.zetathemes_license, d = zetaAj.domain, n.getJSON(o + "/app/?edd_action=check_license&license=" + c, function(o) {
                n.each(o, function(o, e) {
                    n("#" + o).html(e), "license" == o && ("item_name_mismatch" == e ? n("#license").html('<span class="valid_zt_key_info">ON</span> <code>' + c + "</code>") : n("#license").html('<span class="invalid_zt_key_info">OFF</span> <code>' + c + "</code>"))
                })
            }), !1
        })
    }, o.FeaturedTitles = function() {
        Doc.on("click", ".add-to-featured", function() {
            var e = n(this).data("postid");
			
            return nonce = n(this).data("nonce"), n("#feature-add-" + e).html(zetaAj.loading), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    postid: e,
                    nonce: nonce,
                    action: "zt_add_featured"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#feature-add-" + e).html(zetaAj.add_featu), n("#feature-add-" + e).hide(), n("#feature-del-" + e).show()
                }
            }), !1
        }), Doc.on("click", ".del-of-featured", function() {
            var e = n(this).data("postid"),
                o = n(this).data("nonce");
            return n("#feature-del-" + e).html(zetaAj.loading), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    postid: e,
                    nonce: o,
                    action: "zt_remove_featured"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#feature-del-" + e).html(zetaAj.rem_featu), n("#feature-add-" + e).show(), n("#feature-del-" + e).hide()
                }
            }), !1
        })
    }, o.FeaturedSlider = function() {
        Doc.on("click", ".add-to-slide", function() {
			
            var e = n(this).data("postid");
			
            return nonce = n(this).data("nonce"), n("#slide-add-" + e).html(zetaAj.loading), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    postid: e,
                    nonce: nonce,
                    action: "zt_add_featured_slider"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#slide-add-" + e).html(zetaAj.add_featu), n("#slide-add-" + e).hide(), n("#slide-del-" + e).show()
                }
            }), !1
        }), Doc.on("click", ".del-of-slide", function() {
            var e = n(this).data("postid"),
                o = n(this).data("nonce");
            return n("#slide-del-" + e).html(zetaAj.loading), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    postid: e,
                    nonce: o,
                    action: "zt_remove_featured_slider"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#slide-del-" + e).html(zetaAj.rem_featu), n("#slide-add-" + e).show(), n("#slide-del-" + e).hide()
                }
            }), !1
        })
    }, o.UploadBackdrop = function() {
        Doc.on("click", ".import-upload-image", function() {
            var o = n(this).data("prelink");
            return nonce = n(this).data("nonce"), field = n(this).data("field"), postid = n(this).data("postid"), image = n("#" + field).get(0).value, urlimage = o + image, image && (n(".import-upload-image").hide(), n("#" + field).val(zetaAj.loading), n("#" + field).prop("disabled", !0), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    url: urlimage,
                    nonce: nonce,
                    field: field,
                    postid: postid,
                    action: "zt_upload_ajax_image"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#" + field).prop("disabled", !1), n("#" + field).val(o)
                }
            })), !1
        })
    }, o.AdTabsManage = function() {
        1 < n("#zetaadmenu > li.nav-tab").length && Doc.on("click", "#zetaadmenu > li.nav-tab", function() {
            var o = n(this).data("tab");
            return 0 != o && (n("#zetaadmenu > li.nav-tab").removeClass("nav-tab-active"), n(".tab-content").removeClass("on"), n(this).addClass("nav-tab-active"), n("#zetaad-" + o).addClass("on")), !1
        })
    }, o.SaveAdOptions = function() {
        Doc.on("submit", "#zetaadmanage", function() {
            var e = "#zetaadsavebutton";
            return that = n(this), text = n(e).data("text"), n(e).prop("disabled", !0), n(e).val(zetaAj.loading), n("#ad-manage-codes").addClass("hidden"), n.ajax({
                url: Ajx,
                type: "post",
                dataType: "json",
                data: that.serialize(),
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    1 == o.success && (n("#ad-manage-codes").removeClass("hidden"), n(e).prop("disabled", !1), n(e).val(text))
                }
            }), !1
        })
    }, o.LinkPost = function() {
        Doc.on("click", "#zetaflix_anchor_postlinks", function() {
            return n("#zetaflix_lfield_urls").val() ? (n("#zetalinks_response").addClass("onload"), n("#publish").hide(), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    urls: n("#zetaflix_lfield_urls").val(),
                    type: n("#zetaflix_lfield_type").val(),
                    quality: n("#zetaflix_lfield_qual").val(),
                    language: n("#zetaflix_lfield_lang").val(),
                    size: n("#zetaflix_lfield_size").val(),
                    postid: n("#post_ID").val(),
                    action: "zetasave_links"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#publish").show(), n("#zetalinks_response").removeClass("onload"), n("#zetalinks_response").html(o), n("#zetaflix_lfield_urls").val(""), n("#zetaflix_lfield_size").val("")
                }
            })) : alert(zetaAj.nolink), !1
        })
    }, o.LinkDelete = function() {
        Doc.on("click", ".zetadelete_links", function() {
            var e = n(this).data("id");
            return answer = confirm(zetaAj.deletelink), answer && n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    id: e,
                    action: "zetadelt_links"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#link-" + e).remove(), n("#zetaeditorlink-" + e).remove()
                }
            }), !1
        })
    }, o.LinkEditor = function() {
        Doc.on("click", ".zetaedit_links", function() {
            var e = n(this).data("id");
            return n(".zeta_link_editor").remove(), n(".managelinks").show(), n("#link-" + e).addClass("onload"), n("#link-" + e).removeClass("fadein"), n("#link-" + e + " > td > .managelinks").hide(), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    id: e,
                    action: "zetaformeditor_links"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#link-" + e).removeClass("onload"), n("#link-" + e).after(o), n("#zetalinkeditor_url").focus(), n("#link-" + e + " > .managelinks").hide()
                }
            }), !1
        })
    }, o.LinkReload = function() {
        Doc.on("click", "#zetaflix_anchor_reloadllist", function() {
            var o = n(this).data("id");
            return n("#zetalinks_response").addClass("onload"), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    id: o,
                    action: "zetareload_links"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#zetalinks_response").removeClass("onload"), n("#zetalinks_response").html(o)
                }
            }), !1
        })
    }, o.LinkSave = function() {
        Doc.on("click", "#zetalinkeditor_save", function() {
            var e = n(this).data("id");
            return n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    id: e,
                    url: n("#zetalinkeditor_url").val(),
                    lang: n("#zetalinkeditor_lang").val(),
                    type: n("#zetalinkeditor_type").val(),
                    quality: n("#zetalinkeditor_quality").val(),
                    size: n("#zetalinkeditor_size").val(),
                    action: "zetasaveformeditor_links"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n("#link-" + e).addClass("fadein"), n("#link-" + e).html(o), n(".zeta_link_editor").remove()
                }
            }), !1
        })
    }, o.UpdateOptions = function() {
        Doc.on("click", ".zetaflix_update_database", function() {
            return n("#cfg_dts").html(zetaAj.updb), n.ajax({
                url: Ajx,
                type: "post",
                data: {
                    action: "update_dbzetaflix"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    location.reload()
                }
            }), !1
        })
    }, o.UpdateDatabase = function() {
        Doc.on("submit", "#zetalinkmod_form", function() {
            var o = n(this);
            return n("#zetalinkmod_submit").prop("disabled", !0), n.ajax({
                url: Ajx,
                type: "post",
                dataType: "json",
                data: o.serialize(),
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    var e;
                    n("#zetalinkmod_submit").prop("disabled", !1), n("#zetalinkmod > .response").show(), n(".zeta-progress > div").animate({
                        width: o.percentage + "%"
                    }, 150, function() {}), o.step ? (e = parseFloat(o.step) + parseFloat(1), n("#zetalinkmod_step").val(e), n("#zetalinkmod_submit").trigger("click")) : o.next ? (n("#zetalinkmod_run").val(o.next), n("#zetalinkmod_submit").trigger("click")) : (n("#zetalinkmod_form").remove(), n("#zetalinkmod").removeClass("required"), n("#zetalinkmod > .response").html('<div class="notice fadein">' + zetaAj.completed + "</div>"))
                }
            }), !1
        })
    }, o.DatabaseTool = function() {
        Doc.on("click", ".zetadatabasetool", function() {
            var e = n(this),
				z = e.data('noti'),
                s = e.data('num'),
                x = e.data("msg"),
                a = e.data("run"),
                o = n("#zetalinkmod_nonce").val();
          if(a === 'closenoti'){
			n.ajax({
                url: Ajx,
                type: "post",
                dataType: "json",
                data: {
					not: z,
                    run: a,
                    noc: s,
                    action: "zetaflixdbtool"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                  var noticeMsg = e.closest('.notice');
                  if (noticeMsg) {
                    noticeMsg.remove();
                  }
                }
            })
          }else{
            return confirm(x) && (n(e).addClass("disabled"), n("#zetadatabasetool_" + a).html(zetaAj.loading), n.ajax({
                url: Ajx,
                type: "post",
                dataType: "json",
                data: {
                    run: a,
                    noc: o,
                    action: "zetaflixdbtool"
                },
                error: function(o) {
                    console.log(o)
                },
                success: function(o) {
                    n(e).removeClass("disabled"), 1 == o.response && (n("#zetadatabasetool_" + a).html(o.message), 1 == o.remove && n("#zetabox_" + a).remove())
                }
            })), !1
          }
        })
    }
}(jQuery);