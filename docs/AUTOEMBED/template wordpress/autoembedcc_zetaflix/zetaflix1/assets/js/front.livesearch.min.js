! function(n) {
    var e, s = function(s, a) {
            clearTimeout(e), e = setTimeout(s, a)
        },
        a = !1;

    function t() {
        var s = n("#term").val(),
            a = n("#page").val(),
            e = n("#type").val(),
            t = n("#nonce").val(),
            i = n("#action").val();
        n("#get_requests").addClass("loading").find("span").removeClass("fa-search").addClass("fa-spinner-third").addClass("fa-spin"), n.ajax({
            url: ztAjax.url,
            type: "POST",
            data: {
                type: e,
                term: s,
                page: a,
                nonce: t,
                action: i
            },
            error: function(s) {
                n("#get_requests").removeClass("loading").find("span").removeClass("fa-spinner-third").removeClass("fa-spin").addClass("fa-search")
            },
            success: function(s) {

                n("#get_requests").removeClass("loading").find("span").removeClass("fa-spinner-third").removeClass("fa-spin").addClass("fa-search"), n("#discover_results").html(s), n(".get_content_omegadb").click(function() {
                    var a, s = n(this).data("id"),
                        e = n(this).data("type"),
                        t = n(this).data("nonce");
                    e = e, t = t, n("#item-" + (a = s) + " .get_content_omegadb").hide(), n("#item-" + (a = s)).addClass("loading"), n("#item-" + (a = s) + " .itm-request").text(ztAjax.loading), n.ajax({
                        url: ztAjax.url,
                        type: "POST",
                        data: {
                            id: a,
                            type: e,
                            nonce: t,
                            action: "omegadb_post_requests"
                        },
                        error: function(s) {
                            console.log(s),
							 n("#item-" + (a = s)).removeClass("loading"), n("#item-" + (a = s) + " .get_content_omegadb").show(), n("#item-" + (a = s) + " .itm-request").text(ztAjax.request)
                        },
                        success: function(s) {
                            console.log("#item-" + a + " .itm-request"), n("#item-" + a).removeClass("loading").addClass("exstng ready"),  n("#item-" + a + " .itm-request").html(ztAjax.reqsent).removeClass().addClass("itm-exists"),  n("#item-" + a + " .get_content_omegadb").remove()
                        }
                    })
                })
            }
        })
    }
    enterActive = !(e = 0), n('input[name="s"]').on("input", function() {
        var i = this.value;
        s(function() {
            return i.length <= 2 ? (n(ztGonza.area).hide(), void n(ztGonza.button).find("span").removeClass("fa-spinner-third").removeClass("fa-spin")) : void(a || (a = !0, 1 == ztGonza.livesearchactive && (n(ztGonza.button).find("span").addClass("fa-spinner-third").addClass("fa-spin"), n(ztGonza.area).find("ul").addClass("process").addClass("noselect"), n.ajax({
                type: "GET",
                url: ztGonza.api,
                data: "keyword=" + i + "&nonce=" + ztGonza.nonce,
                dataType: "json",
                success: function(s) {
					console.log(s);
                    var a, e, t;
                    s.error ? n(ztGonza.area).hide() : (n(ztGonza.area).show(), 
					e = '<span class="icon-search-1">' + i + "</span>", 
					e = '<li class="result-view-more"><a class="more live_search_click" data-search="searchform">' + (a = ztGonza.more.replace("%s", e)) + "</a></li>", 
					moreText2 = '<li class="ctsv"><a class="more live_search_click" data-search="form-search-resp">' + a + "</a></li>", 
					t = [], n.each(s, function(s, a) {
                        name = "", 
						date = "", 
						imdb = "", !1 !== a.extra.date && (date = '<span class="result-year">' + a.extra.date + '</span>'), !1 !== a.extra.imdb && (imdb = '<div class="imdb"><span class="fas fa-star"></span> ' + a.extra.imdb + "</div>"), t.push('<li id="' + s + '"><div class="result-list-item"><a href="' + a.url + '" class="lnk-hvr"></a><div class="result-item-wrap"><div class="result-item-poster"><span class="item-poster-hover"></span><img src="' + a.img + '"></div><div class="result-item-desc"><div class="result-item-row titl"><span class="result-title">' + a.title + '</span></div><div class="result-l-row">' + date + '<span class="result-sep"></span><span class="result-runtime">168 min</span></div><div class="result-item-row"><span class="result-genre">' + a.extra.genres +'</span></div></div><div class="result-item-btn"><a>' + ztGonza.btn + '</a></div></div></div></li>')
                    }), n(ztGonza.area).html('<ul class="results-list">' + t.join('') + e + '</ul>'))
                },
                complete: function() {
                    enterActive = a = !1, n(ztGonza.button).find("span").removeClass("fa-spinner-third").removeClass("fa-spin"), n(ztGonza.area).find("ul").removeClass("process").removeClass("noselect")
                }
            }))))
        }, 500)
    }), n(document).on("click", ".live_search_click", function() {
        var s = n(this).data("search");
        0 != s && n("#" + s).submit()
    }), n(document).on("keypress", "#search-form", function(s) {
        if (enterActive) return 13 != s.keyCode
    }), n(document).click(function() {
        n(event.target);
        0 == n(event.target).closest('input[name="s"]').length ? n(ztGonza.area).hide() : n(ztGonza.area).show(), 0 == n(event.target).closest(".lglossary").length ? (n(".items_glossary").hide(), n(".lglossary").removeClass("active")) : n(".items_glossary").show()
    }), n(document).on("click", ".post-request", function() {
        n(".post_request").show(), n("#post_request_archive").html('<div class="load_event">' + ztAjax.loading + "</div>");
        var s = n(this).data("id");
        n.ajax({
            url: ztAjax.url,
            type: "POST",
            data: {
                id: s,
                action: "omegadb_post_archive"
            },
            error: function(s) {
                console.log(s)
            },
            success: function(s) {
                n("#post_request_archive").html(s), n(".backdrop").click(function() {
                    n(".post_request").hide()
                })
            }
        })
    }), n("#discover_requests").keyup(function() {
        return s(function() {
            t()
        }, 500), !1
    }), n("#discover_requests").submit(function() {
        return t(), !1
    }), n(document).on("click", ".lglossary", function() {
        var s = n(this).data("glossary"),
            a = n(this).data("type");
        n(".lglossary").removeClass("active"), n(this).addClass("active"), n(".items_glossary").show(), n(".items_glossary").html('<div class="onloader"></div>'), n.ajax({
            type: "GET",
            url: ztGonza.glossary,
            data: "term=" + s + "&nonce=" + ztGonza.nonce + "&type=" + a,
            dataType: "json",
            success: function(s) {
                if (s.error) return n(".items_glossary").hide(), void n(".lglossary").removeClass("active");
                n(".items_glossary").show();
                var e = [];
                n.each(s, function(s, a) {
                    imdb = "", !1 !== a.imdb && (imdb = '<div class="rating"><i class="fas fa-star"></i> ' + a.imdb + "</div>"), e.push('<div id="' + s + '" class="item"><a href="' + a.url + '"><div class="poster"><img src="' + a.img + '"/>' + imdb + '</div></a><div class="data"><h3>' + a.title + "</h3><span>" + a.year + "</span></div></div>")
                }), n(".items_glossary").html('<div class="items animation-2">' + e.join("") + "</div>")
            }
        })
    }), n(document).keyup(function(s) {
        27 == s.keyCode && (n(".post_request").hide(), n(".items_glossary").hide(), n(".items_glossary").html(" "), n(".lglossary").removeClass("active")), 39 == s.keyCode && n("#nextpagination").trigger("click"), 37 == s.keyCode && n("#prevpagination").trigger("click")
    })
}(jQuery);